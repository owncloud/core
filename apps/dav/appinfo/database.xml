<?xml version="1.0" encoding="ISO-8859-1" ?>
<database>

	<!--
	CREATE TABLE calendarsubscriptions (
		id INT(11) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
		uri VARBINARY(200) NOT NULL,
		principaluri VARBINARY(100) NOT NULL,
		source TEXT,
		displayname VARCHAR(100),
		refreshrate VARCHAR(10),
		calendarorder INT(11) UNSIGNED NOT NULL DEFAULT '0',
		calendarcolor VARBINARY(10),
		striptodos TINYINT(1) NULL,
		stripalarms TINYINT(1) NULL,
		stripattachments TINYINT(1) NULL,
		lastmodified INT(11) UNSIGNED,
		UNIQUE(principaluri, uri)
	) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
	-->
<table>
	<name>*dbprefix*calendarsubscriptions</name>
	<declaration>
		<field>
			<name>id</name>
			<type>integer</type>
			<default>0</default>
			<notnull>true</notnull>
			<autoincrement>1</autoincrement>
			<unsigned>true</unsigned>
			<length>11</length>
		</field>
		<field>
			<name>uri</name>
			<type>text</type>
		</field>
		<field>
			<name>principaluri</name>
			<type>text</type>
			<length>255</length>
		</field>
		<field>
			<name>source</name>
			<type>text</type>
			<length>255</length>
		</field>
		<field>
			<name>displayname</name>
			<type>text</type>
			<length>100</length>
		</field>
		<field>
			<name>refreshrate</name>
			<type>text</type>
			<length>10</length>
		</field>
		<field>
			<name>calendarorder</name>
			<type>integer</type>
			<default>0</default>
			<notnull>true</notnull>
			<unsigned>true</unsigned>
		</field>
		<field>
			<name>calendarcolor</name>
			<type>text</type>
		</field>
		<field>
			<name>striptodos</name>
			<type>integer</type>
			<length>1</length>
		</field>
		<field>
			<name>stripalarms</name>
			<type>integer</type>
			<length>1</length>
		</field>
		<field>
			<name>stripattachments</name>
			<type>integer</type>
			<length>1</length>
		</field>
		<field>
			<name>lastmodified</name>
			<type>integer</type>
			<unsigned>true</unsigned>
		</field>
		<index>
			<name>calsub_index</name>
			<unique>true</unique>
			<field>
				<name>principaluri</name>
			</field>
			<field>
				<name>uri</name>
			</field>
		</index>
	</declaration>
</table>
	<!--
	CREATE TABLE schedulingobjects (
		id INT(11) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
		principaluri VARBINARY(255),
		calendardata MEDIUMBLOB,
		uri VARBINARY(200),
		lastmodified INT(11) UNSIGNED,
		etag VARBINARY(32),
		size INT(11) UNSIGNED NOT NULL
	) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
	-->

	<table>
		<name>*dbprefix*schedulingobjects</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
				<autoincrement>1</autoincrement>
				<unsigned>true</unsigned>
				<length>11</length>
			</field>
			<field>
				<name>principaluri</name>
				<type>text</type>
				<length>255</length>
			</field>
			<field>
				<name>calendardata</name>
				<type>blob</type>
			</field>
			<field>
				<name>uri</name>
				<type>text</type>
				<length>255</length>
			</field>
			<field>
				<name>lastmodified</name>
				<type>integer</type>
				<unsigned>true</unsigned>
			</field>
			<field>
				<name>etag</name>
				<type>text</type>
				<length>32</length>
			</field>
			<field>
				<name>size</name>
				<type>integer</type>
				<notnull>true</notnull>
				<unsigned>true</unsigned>
				<length>11</length>
			</field>

		</declaration>
	</table>

	<table>
		<name>*dbprefix*cards_properties</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
				<autoincrement>1</autoincrement>
				<unsigned>true</unsigned>
				<length>11</length>
			</field>
			<field>
				<name>addressbookid</name>
				<type>integer</type>
				<default></default>
				<notnull>true</notnull>
				<length>11</length>
			</field>
			<field>
				<name>cardid</name>
				<type>integer</type>
				<default></default>
				<notnull>true</notnull>
				<unsigned>true</unsigned>
				<length>11</length>
			</field>
			<field>
				<name>name</name>
				<type>text</type>
				<default></default>
				<notnull>false</notnull>
				<length>64</length>
			</field>
			<field>
				<name>value</name>
				<type>text</type>
				<default></default>
				<notnull>false</notnull>
				<length>255</length>
			</field>
			<field>
				<name>preferred</name>
				<type>integer</type>
				<default>1</default>
				<notnull>true</notnull>
				<length>4</length>
			</field>
			<index>
				<name>card_contactid_index</name>
				<field>
					<name>cardid</name>
					<sorting>ascending</sorting>
				</field>
			</index>
			<index>
				<name>card_name_index</name>
				<field>
					<name>name</name>
					<sorting>ascending</sorting>
				</field>
			</index>
			<index>
				<name>card_value_index</name>
				<field>
					<name>value</name>
					<sorting>ascending</sorting>
				</field>
			</index>
		</declaration>
	</table>

	<table>
		<name>*dbprefix*dav_shares</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
				<autoincrement>1</autoincrement>
				<unsigned>true</unsigned>
				<length>11</length>
			</field>
			<field>
				<name>principaluri</name>
				<type>text</type>
				<length>255</length>
			</field>
			<field>
				<name>type</name>
				<type>text</type>
				<length>255</length>
			</field>
			<field>
				<name>access</name>
				<type>integer</type>
				<length>1</length>
			</field>
			<field>
				<name>resourceid</name>
				<type>integer</type>
				<notnull>true</notnull>
				<unsigned>true</unsigned>
			</field>
			<field>
				<name>publicuri</name>
				<type>text</type>
				<length>255</length>
			</field>
			<index>
				<name>dav_shares_index</name>
				<unique>true</unique>
				<field>
					<name>principaluri</name>
				</field>
				<field>
					<name>resourceid</name>
				</field>
				<field>
					<name>type</name>
				</field>
				<field>
					<name>publicuri</name>
				</field>
			</index>
		</declaration>
	</table>
</database>
